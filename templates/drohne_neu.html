{% extends "base.html" %}

{% block content %}
<div class="row">
    <!-- LINKER TEIL: NEUE DROHNE -->
    <div class="col-md-5">
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-warning text-dark">
                <h4 class="mb-0">üöÅ Neue Drohne kaufen</h4>
            </div>
            <div class="card-body p-4">
                <form method="POST">
                    <div class="mb-3">
                        <label class="form-label">Modell Name</label>
                        <input type="text" name="name" placeholder="Wie heisst die Drohne?" class="form-control" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Geschwindigkeit (km/h)</label>
                        <input type="number" name="speed" placeholder="z.B. 80" class="form-control" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Lieferpreis (CHF)</label>
                        <div class="input-group">
                            <input type="number" step="0.01" name="preis" placeholder="5.00" class="form-control" required>
                            <span class="input-group-text">CHF</span>
                        </div>
                    </div>
                    <div class="d-grid">
                        <button type="submit" class="btn btn-warning">Drohne Hinzuf√ºgen</button>
                    </div>
                </form>
            </div>
        </div>
        <a href="/" class="btn btn-outline-secondary mb-3">&laquo; Zur√ºck zur Startseite</a>
    </div>

    <!-- RECHTER TEIL: BESTEHENDE DROHNEN -->
    <div class="col-md-7">
        <div class="card shadow-sm">
            <div class="card-header bg-secondary text-white">
                <h4 class="mb-0">üìã Aktuelle Flotte</h4>
            </div>
            <div class="card-body p-0">
                <table class="table table-striped table-hover mb-0 align-middle">
                    <thead class="table-light">
                        <tr>
                            <th>Modell</th>
                            <th>Infos</th>
                            <th>Status</th>
                            <th class="text-end">Aktion</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for d in drohnen %}
                        <tr>
                            <td class="fw-bold">{{ d.Drohnen_Name }}</td>
                            <td>
                                <small class="d-block">{{ d.Drohnen_Geschwindigkeit_kmh }} km/h</small>
                                <small class="text-muted">{{ d.Drohnen_Preis_CHF }} CHF</small>
                            </td>
                            <td>
                                {% if d.Drohnen_beschaeftigt %}
                                    <span class="badge bg-danger mb-1">Unterwegs</span>
                                    <!-- Button um Drohne zur√ºckzuholen -->
                                    <a href="/drohne-reset/{{ d.Drohnen_id }}" class="btn btn-outline-success btn-sm d-block" style="font-size: 0.7rem;">
                                        üîÑ R√ºckkehr
                                    </a>
                                {% else %}
                                    <span class="badge bg-success">Frei</span>
                                {% endif %}
                            </td>
                            <td class="text-end">
                                <a href="/drohne-loeschen/{{ d.Drohnen_id }}" 
                                   class="btn btn-danger btn-sm"
                                   onclick="return confirm('Drohne wirklich verschrotten?')">
                                   üóëÔ∏è
                                </a>
                            </td>
                        </tr>
                        {% else %}
                        <tr>
                            <td colspan="4" class="text-center py-3 text-muted">
                                Noch keine Drohnen in der Flotte.
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}